# üöÄ UX Research Helper Plugin - Development Instructions

## üìã **Overview**

The UX Research Helper is a Figma/FigJam plugin that provides AI-powered dynamic UX research capabilities. It generates questions dynamically based on user answers and Figma context using Cursor AI integration.

## üéØ **Core Development Principles**

### **ü§ñ AI-ONLY APPROACH**
- **NO HARDCODED DATA**: All content must be generated by AI
- **NO FALLBACK CODE**: No offline or backup systems
- **NO MOCK DATA**: No predefined or static content
- **AI-DRIVEN**: Every question, option, and insight must come from AI

### **üé® Design Standards**
- **Tailwind CSS 3**: Use latest Tailwind CSS for all styling
- **Flat Design**: Clean, minimal, modern flat design principles
- **Responsive**: Must work in Figma's plugin window constraints
- **Professional**: Enterprise-grade UI/UX quality

### **üíª Coding Standards**
- **ES5/ES6 Compatible**: Figma plugin environment limitations
- **No Modern JS**: Avoid optional chaining (`?.`), spread operator (`...`)
- **Clean Code**: Clear variable names, proper comments
- **Error Handling**: Graceful AI error handling only

## üèóÔ∏è **Project Structure**

```
figma-plugin/
‚îú‚îÄ‚îÄ manifest.json                    # Plugin configuration
‚îú‚îÄ‚îÄ code.js                         # Main plugin logic (Figma API)
‚îú‚îÄ‚îÄ ui.html                         # User interface
‚îú‚îÄ‚îÄ instructions/                   # Research methodology files
‚îÇ   ‚îú‚îÄ‚îÄ Global - Global instructions.md
‚îÇ   ‚îî‚îÄ‚îÄ UX Research - Problem Finder.md
‚îú‚îÄ‚îÄ README.md                       # User documentation
‚îú‚îÄ‚îÄ QUICK-START.md                  # Installation guide
‚îú‚îÄ‚îÄ test-plugin.sh                  # Validation script
‚îú‚îÄ‚îÄ DEVELOPMENT.md                  # This file
‚îî‚îÄ‚îÄ *.md                           # Various documentation files
```

## üîß **Development Setup**

### **Prerequisites**
- **Figma Desktop App** (116.0+) or **FigJam Desktop App** (116.0+)
- **Node.js** (for syntax validation)
- **Text Editor** (VS Code recommended)
- **Cursor AI API Key** (REQUIRED - plugin won't work without it)

### **Environment Setup**
1. **Clone/Download** the plugin files to your local machine
2. **Ensure all files** are in the same directory
3. **Configure API Key** in `code.js` (line ~15)
4. **Validate setup** using the test script:
   ```bash
   chmod +x test-plugin.sh
   ./test-plugin.sh
   ```

## üö´ **FORBIDDEN PRACTICES**

### **‚ùå NEVER DO THESE**
- **Hardcode Questions**: Questions must be AI-generated
- **Static Options**: Answer options must be AI-generated
- **Fallback Content**: No offline/backup content
- **Mock Data**: No fake or placeholder data
- **Predefined Responses**: All responses must be AI-generated
- **Static Insights**: Insights must be AI-generated
- **Hardcoded Phases**: Phase progression must be AI-determined

### **‚ùå DESIGN RESTRICTIONS**
- **No Skeuomorphic Design**: Use flat design only
- **No Gradients**: Solid colors only
- **No Shadows**: Flat design principles
- **No 3D Effects**: Keep it flat and clean
- **No Complex Animations**: Simple transitions only

## ‚úÖ **REQUIRED PRACTICES**

### **ü§ñ AI-FIRST DEVELOPMENT**
- **All Questions**: Must be generated by AI based on context
- **All Options**: Must be AI-generated for each question
- **All Insights**: Must be AI-generated from user answers
- **All Phases**: Must be AI-determined progression
- **All Content**: Must be dynamic and contextual

### **üé® DESIGN REQUIREMENTS**
- **Tailwind CSS 3**: Use latest Tailwind classes
- **Flat Design**: Clean, minimal, modern interface
- **Color Palette**: Use Tailwind's flat color system
- **Typography**: Clean, readable fonts
- **Spacing**: Consistent Tailwind spacing system
- **Components**: Flat, clean UI components

### **üíª CODE REQUIREMENTS**
- **AI Integration**: Every feature must use AI
- **Dynamic Content**: No static content allowed
- **Context-Aware**: Use Figma context for AI prompts
- **Error Handling**: Graceful AI error handling only
- **Clean Code**: Well-commented, readable code

## üîë **API Configuration**

### **Cursor AI Integration (REQUIRED)**
The plugin ONLY works with Cursor AI. No API key = No functionality.

**File**: `code.js`
**Location**: Line ~15
```javascript
const PLUGIN_CONFIG = {
    cursorApiKey: 'your_cursor_api_key_here'  // REQUIRED
};
```

**Critical Notes**:
- **NO API KEY = NO FUNCTIONALITY**: Plugin won't work without it
- **NO FALLBACKS**: If AI fails, show error message
- **NO OFFLINE MODE**: Plugin requires internet connection
- **AI-ONLY**: Every feature depends on AI

### **API Endpoint**
**Endpoint**: `https://api.cursor.so/v1/ai/generate`
**Method**: POST
**Headers**: 
- `Content-Type: application/json`
- `Authorization: Bearer {your_api_key}`

## üìÅ **File Descriptions**

### **Core Files**

#### **`manifest.json`**
- **Purpose**: Plugin configuration and permissions
- **Key Settings**:
  - `editorType`: ["figma", "figjam"] - Supports both editors
  - `networkAccess`: Allowed domains for API calls
  - `permissions`: Required Figma permissions

#### **`code.js`**
- **Purpose**: Main plugin logic and Figma API integration
- **Key Functions**:
  - `ResearchManager`: Main class managing research flow
  - `callCursorAI()`: Handles AI API communication
  - `generateQuestion()`: AI-powered question generation
  - `processAnswer()`: Processes user answers with AI

#### **`ui.html`**
- **Purpose**: User interface and interaction logic
- **Key Features**:
  - Multi-screen navigation (Landing ‚Üí Tool Selection ‚Üí Research)
  - Dynamic question display
  - Status tracking (Gaps, Follow-ups, Design Discussions)
  - Modal system for detailed views

### **Instruction Files**

#### **`instructions/Global - Global instructions.md`**
- **Purpose**: Global research methodology and guidelines
- **Content**: Research principles, best practices, general instructions

#### **`instructions/UX Research - Problem Finder.md`**
- **Purpose**: Specific methodology for Problem Finder research
- **Content**: Phase definitions, question frameworks, completion criteria

## üõ†Ô∏è **Development Workflow**

### **1. Making Changes**

#### **UI Changes** (`ui.html`)
- **Tailwind CSS 3**: Use latest Tailwind classes only
- **Flat Design**: Clean, minimal interface
- **AI Integration**: All content must be AI-generated
- **No Hardcoded**: No static text or content

#### **Plugin Logic** (`code.js`)
- **AI-Only**: Every feature must use AI
- **No Fallbacks**: If AI fails, show error
- **Dynamic Content**: All content must be generated
- **Context-Aware**: Use Figma context for AI prompts

#### **Configuration** (`manifest.json`)
- **Network Access**: Only for AI API calls
- **Permissions**: Minimal required permissions
- **No External**: No external content loading

### **2. Testing Changes**

#### **Syntax Validation**
```bash
node -c code.js
```

#### **Full Plugin Validation**
```bash
./test-plugin.sh
```

#### **AI Functionality Test**
- Test question generation
- Test answer processing
- Test AI insights generation
- Verify no hardcoded content

### **3. Debugging**

#### **AI Debugging**
- Check API key configuration
- Monitor AI API calls
- Verify AI responses
- Check error handling

#### **Common AI Issues**
- **API Key Missing**: Plugin won't work
- **API Endpoint Error**: Check network permissions
- **AI Response Error**: Handle gracefully
- **No Internet**: Show error message

## üîÑ **AI Integration Details**

### **Question Generation Flow**
1. **User Action**: Clicks "Problem Finder"
2. **Context Gathering**: Plugin collects Figma context
3. **AI Request**: Sends prompt to Cursor AI API
4. **Response Processing**: Parses AI response for question and options
5. **UI Update**: Displays generated question

### **Answer Processing Flow**
1. **User Selection**: User selects answer option
2. **Answer Recording**: Stores answer with metadata
3. **AI Analysis**: Sends answer to AI for processing
4. **Insight Generation**: AI generates insights, follow-ups, design implications
5. **Next Question**: AI generates next question based on answer

### **AI Prompt Structure**
```javascript
const prompt = `
Generate a UX research question for the Problem Finder methodology.

Current Phase: ${phase}
Previous Answer: ${previousAnswer || 'None - this is the first question'}
Figma Context: ${JSON.stringify(context || {})}

Generate ONE focused question that:
1. Follows the Problem Finder methodology
2. Is appropriate for the current phase
3. Builds on previous answers if available
4. Considers the Figma design context

Also provide 4 answer options for the question.

Format your response as JSON:
{
    "question": "Your generated question here",
    "options": ["Option 1", "Option 2", "Option 3", "Custom Response"],
    "reasoning": "Why this question is important for this phase"
}
`;
```

## üö® **Troubleshooting**

### **AI-Related Errors**

#### **"Failed to fetch" Error**
- **Cause**: API endpoint not accessible
- **Solution**: Check API endpoint URL and network permissions
- **Action**: Verify `manifest.json` includes correct domain
- **NO FALLBACK**: Show error message, don't provide offline content

#### **"API Key Missing" Error**
- **Cause**: No API key configured
- **Solution**: Add API key to `code.js`
- **Action**: Plugin won't work without API key
- **NO FALLBACK**: Don't provide offline functionality

#### **"AI Response Error" Error**
- **Cause**: AI API returned error
- **Solution**: Handle gracefully, show error message
- **Action**: Don't provide fallback content
- **NO FALLBACK**: User must retry or check connection

### **Design Issues**

#### **Non-Flat Design**
- **Cause**: Using gradients, shadows, or 3D effects
- **Solution**: Use Tailwind's flat design classes
- **Action**: Remove all non-flat design elements
- **Requirement**: Clean, minimal, modern interface

#### **Hardcoded Content**
- **Cause**: Static text or predefined content
- **Solution**: Generate all content with AI
- **Action**: Remove all hardcoded text
- **Requirement**: Everything must be AI-generated

### **Code Issues**

#### **Modern JavaScript Features**
- **Cause**: Using optional chaining (`?.`) or spread operator (`...`)
- **Solution**: Use ES5/ES6 compatible syntax
- **Action**: Replace with compatible alternatives
- **Requirement**: Figma plugin environment limitations

## üìö **API Reference**

### **Figma Plugin API**
- **Documentation**: https://www.figma.com/plugin-docs/
- **Key Methods**: `figma.showUI()`, `figma.ui.postMessage()`, `figma.currentPage`
- **Permissions**: `currentuser`, `networkAccess`

### **Cursor AI API**
- **Endpoint**: `https://api.cursor.so/v1/ai/generate`
- **Method**: POST
- **Authentication**: Bearer token
- **Request Format**: JSON with prompt and parameters

## üîí **Security Considerations**

### **API Key Management**
- **Never commit** API keys to version control
- **Use environment variables** for production
- **Rotate keys** regularly
- **Monitor usage** for unauthorized access

### **Network Security**
- **HTTPS only** for API calls
- **Validate responses** from external APIs
- **Handle errors** gracefully
- **Rate limiting** considerations

## üöÄ **Deployment**

### **Development Deployment**
1. **Test thoroughly** in Figma Desktop App
2. **Validate** all functionality works
3. **Check** error handling and edge cases
4. **Document** any changes or new features

### **Production Considerations**
- **API key security** and rotation
- **Error monitoring** and logging
- **Performance optimization**
- **User feedback** collection

## üìù **Contributing Guidelines**

### **Code Standards**
- **AI-Only**: Every feature must use AI
- **No Hardcoded Data**: All content must be AI-generated
- **No Fallbacks**: No offline or backup systems
- **Tailwind CSS 3**: Use latest Tailwind classes
- **Flat Design**: Clean, minimal, modern interface
- **ES5/ES6 Compatible**: Figma plugin environment limitations

### **Documentation Requirements**
- **Update README.md** for user-facing changes
- **Update this file** for development changes
- **Comment AI Integration** in code
- **Document API Changes** and new features

### **Testing Requirements**
- **Test AI Functionality** before committing
- **Validate Syntax** with Node.js
- **Test in both** Figma and FigJam
- **Verify No Hardcoded Content**
- **Check AI Error Handling**

## üîó **Useful Links**

- **Figma Plugin Documentation**: https://www.figma.com/plugin-docs/
- **Figma API Reference**: https://www.figma.com/plugin-docs/api/
- **Tailwind CSS 3**: https://tailwindcss.com/docs
- **JavaScript Compatibility**: https://developer.mozilla.org/en-US/docs/Web/JavaScript
- **Network Requests in Plugins**: https://www.figma.com/plugin-docs/making-network-requests/

## üìû **Support**

### **Getting Help**
1. **Check this documentation** first
2. **Review AI error messages** in console
3. **Test with API key** to isolate issues
4. **Check Figma plugin documentation** for API issues

### **Reporting Issues**
When reporting issues, include:
- **AI error messages** from console
- **API key status** (working/not working)
- **Steps to reproduce** the issue
- **Figma version** and operating system
- **Plugin version** and configuration

---

**Last Updated**: December 2024  
**Version**: 1.0.0  
**Compatibility**: Figma Desktop App 116.0+ | FigJam Desktop App 116.0+  
**Requirements**: Cursor AI API Key (REQUIRED)  
**Design**: Tailwind CSS 3 + Flat Design  
**Approach**: AI-ONLY (No Hardcoded Data, No Fallbacks, No Mock Data)
